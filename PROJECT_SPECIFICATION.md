# ChatPack - é¡¹ç›®è§„èŒƒæ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

ChatPackï¼ˆå•è¯åè¿æŠ½ï¼‰æ˜¯ä¸€ä¸ªè‹±è¯­å•è¯å­¦ä¹ æ¸¸æˆå¹³å°ï¼Œé€šè¿‡ã€Œå¼€å¡åŒ…æ”¶é›†å•è¯ã€å’Œã€Œåˆ†çº§èŠå¤©å®¤äº¤æµã€çš„æ¸¸æˆåŒ–æ–¹å¼å­¦ä¹ è‹±è¯­ã€‚
é¡¹ç›®åŒ…å«ä¸»é¡µé¢å’Œåå°ç®¡ç†é¡µé¢ï¼Œåå°ç®¡ç†é¡µé¢åªæœ‰adminèƒ½è¿›å…¥ã€‚

**æ ¸å¿ƒåŠŸèƒ½:** 
- ğŸ´ å¼€å¡åŒ…æ”¶é›†å•è¯ï¼ˆç±»ä¼¼å¡ç‰Œæ¸¸æˆï¼‰
- ğŸ’¬ åˆ†çº§èŠå¤©å®¤ç”¨å•è¯äº¤æµ
- ğŸ“š å•è¯åº“å­˜ç®¡ç†
- ğŸ® æ¸¸æˆåŒ–å­¦ä¹ ä½“éªŒ

> ğŸ“– **åŠŸèƒ½è¯¦ç»†è¯´æ˜**: è¯·æŸ¥çœ‹ [FEATURES.md](./FEATURES.md)

### æŠ€æœ¯æ ˆ
- **å‰ç«¯æ¡†æ¶**: Next.js 14+ (App Router)
- **UI æ¡†æ¶**: React 18+
- **UI ç»„ä»¶åº“**: shadcn/ui
- **æ ·å¼æ–¹æ¡ˆ**: Tailwind CSS
- **è¯­è¨€**: TypeScript
- **çŠ¶æ€ç®¡ç†**: Zustand
- **æ•°æ®åº“**: Supabase (PostgreSQL)
- **å®æ—¶é€šä¿¡**: Supabase Realtime
- **èº«ä»½éªŒè¯**: è‡ªå®šä¹‰è®¤è¯ç³»ç»Ÿï¼ˆåŸºäº Supabaseï¼‰
- **éƒ¨ç½²**: Vercel (æ¨è)

---

## ç›¸å…³æ–‡æ¡£

- ğŸ“– [FEATURES.md](./FEATURES.md) - åŠŸèƒ½è¯´æ˜ä¸æ¸¸æˆæœºåˆ¶
- ğŸ—„ï¸ [DATABASE_DESIGN.md](./DATABASE_DESIGN.md) - æ•°æ®åº“è®¾è®¡è¯¦ç»†è¯´æ˜
- ğŸ”Œ [API_SPECIFICATION.md](./API_SPECIFICATION.md) - API æ¥å£è§„èŒƒ

---

## æ ¸å¿ƒåŠŸèƒ½è¯´æ˜

### 1. ç”¨æˆ·ç³»ç»Ÿ

#### 1.1 æ³¨å†Œä¸ç™»å½•
- ç”¨æˆ·åé•¿åº¦ï¼š3-50å­—ç¬¦ï¼Œå”¯ä¸€
- å¯†ç ï¼šä½¿ç”¨ bcrypt åŠ å¯†å­˜å‚¨
- å¯é€‰é‚€è¯·ç æ³¨å†Œï¼ˆè®°å½•é‚€è¯·å…³ç³»ï¼‰
- è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€8ä½é‚€è¯·ç 

#### 1.2 ç”¨æˆ·è§’è‰²
- **USER**: æ™®é€šç”¨æˆ·ï¼Œå¯ä»¥ç©æ¸¸æˆã€èŠå¤©
- **ADMIN**: ç®¡ç†å‘˜ï¼Œå¯ä»¥ç®¡ç†å•è¯ã€å•è¯ä¹¦ã€ç”¨æˆ·

#### 1.3 ç”¨æˆ·èµ„æ–™
- å¯ä¿®æ”¹æ˜µç§°ï¼ˆå±•ç¤ºä¼˜å…ˆçº§ï¼šnickname > usernameï¼‰
- å¯ä¸Šä¼ å¤´åƒ
- æŸ¥çœ‹ä¸ªäººç»Ÿè®¡ï¼šæ€»å¼€åŒ…æ•°ã€å•è¯æ”¶é›†æ•°

### 2. å•è¯ç³»ç»Ÿ

#### 2.1 å•è¯å±æ€§
- **word**: å•è¯æœ¬èº«ï¼ˆè‹±æ–‡ï¼‰
- **definition**: ä¸­æ–‡é‡Šä¹‰
- **pronunciation**: éŸ³æ ‡ï¼ˆå¯é€‰ï¼‰
- **rarity**: ç¨€æœ‰åº¦ï¼ˆCOMMONã€RAREã€EPICã€LEGENDARYï¼‰
- **exampleSentence**: ä¾‹å¥ï¼ˆå¯é€‰ï¼‰
- **imageUrl**: å¡ç‰Œå›¾ç‰‡URLï¼ˆå¡é¢ï¼Œå¯é€‰ï¼‰
- **audioUrl**: å‘éŸ³éŸ³é¢‘URLï¼ˆå¯é€‰ï¼‰
- **wordbooks**: æ‰€å±å•è¯ä¹¦ï¼ˆå¯å±äºå¤šä¸ªï¼‰

#### 2.2 å•è¯ä¹¦åˆ†çº§
- **å°å­¦ (PRIMARY)**: åŸºç¡€è¯æ±‡ï¼Œçº¦800è¯
- **åˆä¸­ (MIDDLE)**: åˆä¸­è¯æ±‡ï¼Œçº¦1600è¯
- **é«˜ä¸­ (HIGH)**: é«˜ä¸­è¯æ±‡ï¼Œçº¦3500è¯
- **å››çº§ (CET4)**: å››çº§è¯æ±‡ï¼Œçº¦4500è¯
- **å…­çº§ (CET6)**: å…­çº§è¯æ±‡ï¼Œçº¦5500è¯
- **è€ƒç ” (POSTGRADUATE)**: è€ƒç ”è¯æ±‡ï¼Œçº¦6000è¯

#### 2.3 å•è¯ä¸å•è¯ä¹¦å…³è”
- ä¸€ä¸ªå•è¯å¯ä»¥å±äºå¤šä¸ªå•è¯ä¹¦
- ç®¡ç†å‘˜å¯ä»¥æŒ‡å®šå•è¯å±äºå“ªäº›å•è¯ä¹¦
- ç”¨æˆ·åªèƒ½çœ‹åˆ°è‡ªå·±æ‹¥æœ‰çš„å•è¯

### 3. å¡åŒ…ç³»ç»Ÿ

#### 3.1 å¡åŒ…ç±»å‹
æŒ‰ç¨€æœ‰åº¦åˆ†ç±»ï¼Œæ¯ç§å¡åŒ…åªå¼€å‡ºå¯¹åº”ç¨€æœ‰åº¦çš„å•è¯ã€‚

| å¡åŒ…åç§° | ç¨€æœ‰åº¦ç±»å‹ | å¡ç‰‡æ•° | è¯´æ˜ |
|---------|-----------|--------|------|
| æ™®é€šå¡åŒ… | COMMON | 5 | åªå¼€å‡ºæ™®é€šç¨€æœ‰åº¦å•è¯ |
| ç¨€æœ‰å¡åŒ… | RARE | 5 | åªå¼€å‡ºç¨€æœ‰ç¨€æœ‰åº¦å•è¯ |
| å²è¯—å¡åŒ… | EPIC | 5 | åªå¼€å‡ºå²è¯—ç¨€æœ‰åº¦å•è¯ |
| ä¼ è¯´å¡åŒ… | LEGENDARY | 5 | åªå¼€å‡ºä¼ è¯´ç¨€æœ‰åº¦å•è¯ |

#### 3.2 å¼€åŒ…æœºåˆ¶
- æ¯æ¬¡å¼€åŒ…è·å¾—5å¼ å¡ç‰‡
- åªå¼€å‡ºå¡åŒ…å¯¹åº”ç¨€æœ‰åº¦çš„å•è¯
- **åªä¼šå¼€åˆ°ç”¨æˆ·æœªæ‹¥æœ‰çš„å•è¯**
- å¦‚æœè¯¥ç¨€æœ‰åº¦çš„æœªæ‹¥æœ‰å•è¯æ•°é‡ä¸è¶³ï¼Œåˆ™å¼€å‡ºå®é™…å¯å¼€æ•°é‡

### 4. èŠå¤©å®¤ç³»ç»Ÿ

#### 4.1 ç¯å¢ƒåˆ†çº§
èŠå¤©å®¤æŒ‰å•è¯ä¹¦ç­‰çº§åˆ†ä¸º6ä¸ªç¯å¢ƒï¼Œæ¯ä¸ªç¯å¢ƒå¯¹åº”ä¸€ä¸ªå•è¯ä¹¦ç­‰çº§ã€‚

| èŠå¤©å®¤ | ç¯å¢ƒç­‰çº§ | å¯ç”¨å•è¯èŒƒå›´ |
|--------|---------|-------------|
| ğŸŒ± å°å­¦ä¹å›­ | PRIMARY | åªèƒ½ä½¿ç”¨å°å­¦å•è¯ |
| ğŸŒ¿ åˆä¸­ä¸–ç•Œ | MIDDLE | å°å­¦ + åˆä¸­ |
| ğŸŒ³ é«˜ä¸­æ®¿å ‚ | HIGH | å°å­¦ + åˆä¸­ + é«˜ä¸­ |
| ğŸ“ å››çº§å¹¿åœº | CET4 | å››çº§åŠä»¥ä¸‹ |
| ğŸ† å…­çº§å¤©åœ° | CET6 | å…­çº§åŠä»¥ä¸‹ |
| ğŸ‘‘ è€ƒç ”é¢†åŸŸ | POSTGRADUATE | æ‰€æœ‰å•è¯ |

#### 4.2 æ¶ˆæ¯è§„åˆ™
- ç”¨æˆ·å‘é€æ¶ˆæ¯æ—¶ï¼Œåç«¯éªŒè¯ï¼š
  1. æ¶ˆæ¯å†…å®¹æ˜¯å¦ä¸ºå•ä¸ªå•è¯
  2. è¯¥å•è¯æ˜¯å¦åœ¨ç”¨æˆ·åº“å­˜ä¸­
  3. è¯¥å•è¯æ˜¯å¦å±äºå½“å‰èŠå¤©å®¤ç¯å¢ƒå…è®¸çš„å•è¯ä¹¦

#### 4.3 å®æ—¶åŠŸèƒ½
- å®æ—¶æ¶ˆæ¯æ¨é€ï¼ˆSupabase Realtimeï¼‰
- åœ¨çº¿ç”¨æˆ·çŠ¶æ€ï¼ˆSupabase Presenceï¼‰
- æ¶ˆæ¯å›å¤åŠŸèƒ½
- **é€èŠ±äº’åŠ¨**ï¼ˆRealtime æ›´æ–°ï¼‰

#### 4.4 é€èŠ±ç³»ç»Ÿ
- ä»»ä½•äººéƒ½å¯ä»¥ç»™å…¶ä»–äººçš„æ¶ˆæ¯é€èŠ±
- æ¶ˆæ¯é²œèŠ±æ•°+1ï¼Œå‘è¨€äººæ€»é²œèŠ±æ•°+1
- é€èŠ±å…è´¹æ— é™ï¼Œä¸æ¶ˆè€—è‡ªå·±çš„é²œèŠ±
- å¯ä»¥å–æ¶ˆé€èŠ±ï¼ˆé²œèŠ±æ•°ç›¸åº”-1ï¼‰
- æ¯ä¸ªç”¨æˆ·å¯¹æ¯æ¡æ¶ˆæ¯åªèƒ½é€ä¸€æœµèŠ±
- é€šè¿‡ Realtime å®æ—¶æ›´æ–°é²œèŠ±æ•°

### 5. ç®¡ç†å‘˜åŠŸèƒ½

#### 5.1 å•è¯ç®¡ç†
- æŸ¥çœ‹æ‰€æœ‰å•è¯ï¼ˆæœç´¢ã€ç­›é€‰ã€åˆ†é¡µï¼‰
- æ·»åŠ æ–°å•è¯
- ç¼–è¾‘å•è¯ä¿¡æ¯
- åˆ é™¤å•è¯
- æ‰¹é‡å¯¼å…¥å•è¯ï¼ˆCSV/JSONï¼‰

#### 5.2 å•è¯ä¹¦ç®¡ç†
- æŸ¥çœ‹æ‰€æœ‰å•è¯ä¹¦
- ç¼–è¾‘å•è¯ä¹¦ä¿¡æ¯
- å¯ç”¨/ç¦ç”¨å•è¯ä¹¦
- ä¸ºå•è¯ä¹¦æ·»åŠ å•è¯
- ä»å•è¯ä¹¦ç§»é™¤å•è¯
- æŸ¥çœ‹å•è¯ä¹¦ä¸­çš„æ‰€æœ‰å•è¯

#### 5.3 ç”¨æˆ·ç®¡ç†
- æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·
- å°ç¦/è§£å°ç”¨æˆ·
- è°ƒæ•´ç”¨æˆ·å¡åŒ…æ•°é‡
- æŸ¥çœ‹ç”¨æˆ·è¯¦ç»†ä¿¡æ¯

#### 5.4 èŠå¤©å®¤ç®¡ç†
- åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤èŠå¤©å®¤
- è‡ªå®šä¹‰èŠå¤©å®¤åç§°å’Œæè¿°
- é…ç½®èŠå¤©å®¤ç¯å¢ƒç­‰çº§ï¼ˆå†³å®šå¯ç”¨å•è¯èŒƒå›´ï¼‰
- å¯ç”¨/ç¦ç”¨èŠå¤©å®¤
- èŠå¤©å®¤åˆ—è¡¨åŠ¨æ€è·å–

#### 5.5 å¡åŒ…ç®¡ç†
- åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤å¡åŒ…
- é…ç½®å¡åŒ…åç§°ã€æè¿°ã€å¡ç‰‡æ•°é‡
- é…ç½®å¡åŒ…ç¨€æœ‰åº¦ç±»å‹
- å¯ç”¨/ç¦ç”¨å¡åŒ…
- æŸ¥çœ‹å¡åŒ…ä½¿ç”¨ç»Ÿè®¡

#### 5.6 æ•°æ®ç»Ÿè®¡
- ç”¨æˆ·ã€å•è¯ã€å¡åŒ…ã€æ¶ˆæ¯ç­‰æ•°æ®æ¦‚è§ˆ
- å›¾è¡¨å±•ç¤ºæ•°æ®è¶‹åŠ¿
- æ´»è·ƒåº¦åˆ†æ

---

## å‰ç«¯é¡µé¢ç»“æ„

### 1. å…¬å…±é¡µé¢

#### 1.1 ç™»å½•/æ³¨å†Œé¡µ (`/login`)
- ç™»å½•è¡¨å•
- æ³¨å†Œè¡¨å•
- é‚€è¯·ç è¾“å…¥ï¼ˆå¯é€‰ï¼‰

#### 1.2 æ¸¸æˆä¸»é¡µ (`/`)
- ç”¨æˆ·ä¿¡æ¯å¤´éƒ¨ï¼ˆå¤´åƒã€æ˜µç§°ã€å¡åŒ…æ•°ï¼‰
- èŠå¤©å®¤åˆ—è¡¨
- è¿›å…¥èŠå¤©å®¤
- æŸ¥çœ‹æˆ‘çš„å•è¯åº“å­˜

### 2. èŠå¤©å®¤é¡µé¢ (`/room/:id`)

**å¸ƒå±€:**
```
+------------------------------------------+
|  [è¿”å›] å°å­¦ä¹å›­ (15äººåœ¨çº¿)              |
+------------------------------------------+
| åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ |      èŠå¤©æ¶ˆæ¯åŒºåŸŸ          |
| - User1     |  [User2]: hello            |
| - User2     |  [User3]: world            |
| - User3     |  [Me]: thanks              |
|             |                            |
+------------------------------------------+
|  [è¾“å…¥æ¡†: è¾“å…¥å•è¯]  [å‘é€] [å•è¯åˆ—è¡¨]   |
+------------------------------------------+
```

**åŠŸèƒ½:**
- å®æ—¶æ¶ˆæ¯æ˜¾ç¤º
- åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ï¼ˆPresenceï¼‰
- å‘é€æ¶ˆæ¯ï¼ˆåªèƒ½å‘é€å•ä¸ªå•è¯ï¼‰
- æŸ¥çœ‹å¯ç”¨å•è¯åˆ—è¡¨ï¼ˆå¼¹çª—ï¼‰

### 3. æˆ‘çš„å•è¯é¡µé¢ (`/words`)

**åŠŸèƒ½:**
- å•è¯åˆ—è¡¨ï¼ˆæ”¯æŒæœç´¢ã€ç­›é€‰ï¼‰
- æŒ‰ç¨€æœ‰åº¦åˆ†ç±»æ˜¾ç¤º
- æ”¶è—å•è¯
- æŸ¥çœ‹è·å¾—æ—¶é—´
- ç»Ÿè®¡ä¿¡æ¯ï¼ˆæ€»æ•°ã€å„ç¨€æœ‰åº¦æ•°é‡ï¼‰

### 4. å¼€å¡åŒ…é¡µé¢ (`/packs`)

**åŠŸèƒ½:**
- æ˜¾ç¤ºç”¨æˆ·æ‹¥æœ‰çš„å¡åŒ…
- é€‰æ‹©å¡åŒ…å¼€å¯
- å±•ç¤ºå¼€åŒ…åŠ¨ç”»
- æ˜¾ç¤ºå¼€å‡ºçš„å•è¯ï¼ˆæ ‡æ³¨æ–°æ—§ï¼‰
- ç»Ÿè®¡ä¿¡æ¯

### 5. ç®¡ç†å‘˜é¡µé¢ (`/admin`)

éœ€è¦ç®¡ç†å‘˜æƒé™è®¿é—®ã€‚

#### 5.1 æ•°æ®ç»Ÿè®¡ (`/admin` æˆ– `/admin/dashboard`)
- ç”¨æˆ·ç»Ÿè®¡ï¼šæ€»æ•°ã€ä»Šæ—¥æ´»è·ƒã€æœ¬å‘¨æ–°å¢ã€å°ç¦æ•°
- å•è¯ç»Ÿè®¡ï¼šæ€»æ•°ã€æŒ‰ç¨€æœ‰åº¦åˆ†å¸ƒã€æŒ‰å•è¯ä¹¦åˆ†å¸ƒ
- å¡åŒ…ç»Ÿè®¡ï¼šæ€»å¼€åŒ…æ•°ã€æœ¬å‘¨å¼€åŒ…ã€åº“å­˜æ€»æ•°
- æ¶ˆæ¯ç»Ÿè®¡ï¼šæ€»æ¶ˆæ¯æ•°ã€ä»Šæ—¥æ¶ˆæ¯ã€æ€»é²œèŠ±æ•°
- èŠå¤©å®¤ç»Ÿè®¡ï¼šæ€»æ•°ã€åœ¨çº¿ç”¨æˆ·æ•°
- æ•°æ®å›¾è¡¨å±•ç¤º

#### 5.2 å•è¯ç®¡ç† (`/admin/words`)
- å•è¯åˆ—è¡¨ï¼ˆæœç´¢ã€ç­›é€‰ã€åˆ†é¡µï¼‰
- æ·»åŠ å•è¯
- ç¼–è¾‘å•è¯
- åˆ é™¤å•è¯
- æ‰¹é‡å¯¼å…¥

#### 5.3 å•è¯ä¹¦ç®¡ç† (`/admin/wordbooks`)
- å•è¯ä¹¦åˆ—è¡¨
- ç¼–è¾‘å•è¯ä¹¦
- æŸ¥çœ‹å•è¯ä¹¦å•è¯
- æ·»åŠ /ç§»é™¤å•è¯

#### 5.4 èŠå¤©å®¤ç®¡ç† (`/admin/rooms`)
- èŠå¤©å®¤åˆ—è¡¨
- åˆ›å»º/ç¼–è¾‘/åˆ é™¤èŠå¤©å®¤
- é…ç½®åç§°ã€æè¿°å’Œç¯å¢ƒç­‰çº§
- å¯ç”¨/ç¦ç”¨èŠå¤©å®¤

#### 5.5 ç”¨æˆ·ç®¡ç† (`/admin/users`)
- ç”¨æˆ·åˆ—è¡¨ï¼ˆæœç´¢ã€ç­›é€‰ã€åˆ†é¡µï¼‰
- æŸ¥çœ‹ç”¨æˆ·è¯¦ç»†ä¿¡æ¯
- å°ç¦/è§£å°ç”¨æˆ·
- èµ é€å¡åŒ…
- æŸ¥çœ‹ç”¨æˆ·å•è¯åº“å­˜å’Œå¼€åŒ…è®°å½•

#### 5.6 å¡åŒ…ç®¡ç† (`/admin/packs`)
- å¡åŒ…åˆ—è¡¨
- åˆ›å»º/ç¼–è¾‘/åˆ é™¤å¡åŒ…
- é…ç½®å¡åŒ…åç§°ã€æè¿°ã€å¡ç‰‡æ•°é‡
- é…ç½®å¡åŒ…ç¨€æœ‰åº¦ç±»å‹
- å¯ç”¨/ç¦ç”¨å¡åŒ…

#### 5.7 ç³»ç»Ÿè®¾ç½® (`/admin/settings`)
- å…¨å±€é…ç½®é¡¹ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰
- ç³»ç»Ÿå‚æ•°è°ƒæ•´
- åŠŸèƒ½å¼€å…³

---

## æŠ€æœ¯å®ç°è¦ç‚¹

### 1. è®¤è¯ä¸­é—´ä»¶

```typescript
// src/middleware.ts
export async function middleware(request: NextRequest) {
  const token = request.cookies.get('auth-token')?.value
  
  // éªŒè¯ token
  // ä¿æŠ¤éœ€è¦ç™»å½•çš„è·¯ç”±
  // ä¿æŠ¤ç®¡ç†å‘˜è·¯ç”±
}
```

### 2. API è·¯ç”±ç»“æ„

```
src/app/api/
â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ register/route.ts
â”‚   â”œâ”€â”€ login/route.ts
â”‚   â”œâ”€â”€ logout/route.ts
â”‚   â””â”€â”€ me/route.ts
â”œâ”€â”€ words/route.ts
â”œâ”€â”€ wordbooks/route.ts
â”œâ”€â”€ users/
â”‚   â”œâ”€â”€ words/route.ts
â”‚   â”œâ”€â”€ packs/route.ts
â”‚   â””â”€â”€ inventory/route.ts
â”œâ”€â”€ packs/
â”‚   â”œâ”€â”€ route.ts
â”‚   â””â”€â”€ open/route.ts
â”œâ”€â”€ rooms/
â”‚   â”œâ”€â”€ route.ts
â”‚   â””â”€â”€ [id]/
â”‚       â””â”€â”€ messages/route.ts
â””â”€â”€ messages/
    â””â”€â”€ route.ts
```

### 3. çŠ¶æ€ç®¡ç† (Zustand)

**å…¨å±€çŠ¶æ€:**

```typescript
// src/stores/useAuthStore.ts
interface AuthState {
  user: User | null
  isAuthenticated: boolean
  login: (user: User) => void
  logout: () => void
}

// src/stores/useInventoryStore.ts
interface InventoryState {
  words: Word[]
  packs: Pack[]
  fetchWords: () => Promise<void>
  fetchPacks: () => Promise<void>
}
```

### 4. å®æ—¶é€šä¿¡ Hook

```typescript
// src/hooks/useRoomRealtime.ts
export function useRoomRealtime(roomId: string) {
  const [messages, setMessages] = useState([])
  const [onlineUsers, setOnlineUsers] = useState([])
  
  useEffect(() => {
    // è®¢é˜…æ¶ˆæ¯
    // è®¢é˜…åœ¨çº¿çŠ¶æ€
    // æ¸…ç†è®¢é˜…
  }, [roomId])
  
  return { messages, onlineUsers, sendMessage }
}
```

### 5. UI ç»„ä»¶ (shadcn/ui)

**æ¨èä½¿ç”¨çš„ç»„ä»¶:**
- `Button`, `Input`, `Card` - åŸºç¡€ç»„ä»¶
- `Dialog`, `Sheet` - æ¨¡æ€æ¡†å’Œä¾§è¾¹æ 
- `Table`, `Pagination` - åˆ—è¡¨å’Œåˆ†é¡µ
- `Select`, `Combobox` - ä¸‹æ‹‰é€‰æ‹©
- `Toast` - æ¶ˆæ¯æç¤º
- `Avatar`, `Badge` - ç”¨æˆ·å¤´åƒå’Œæ ‡ç­¾

### 6. ç±»å‹å®šä¹‰

```typescript
// src/types/index.ts
export type UserRole = 'USER' | 'ADMIN'
export type Rarity = 'COMMON' | 'RARE' | 'EPIC' | 'LEGENDARY'
export type WordbookLevel = 'PRIMARY' | 'MIDDLE' | 'HIGH' | 'CET4' | 'CET6' | 'POSTGRADUATE'
export type RoomEnvironment = WordbookLevel

export interface User {
  id: string
  username: string
  nickname?: string
  avatar?: string
  role: UserRole
  totalPacksOpened: number
  inviteCode: string
}

export interface Word {
  id: string
  word: string
  definition: string
  pronunciation?: string
  rarity: Rarity
  exampleSentence?: string
}

export interface Pack {
  id: string
  name: string
  description: string
  cardCount: number
  maxWordbookLevel: WordbookLevel
}

export interface Message {
  id: string
  roomId: string
  userId: string
  username: string
  nickname?: string
  avatar?: string
  content: string
  timestamp: string
  replyToId?: string
}
```

---

## éƒ¨ç½²æŒ‡å—

### 1. Supabase è®¾ç½®

1. åˆ›å»ºæ–°çš„ Supabase é¡¹ç›®
2. åœ¨ SQL Editor ä¸­æ‰§è¡Œæ•°æ®åº“è¿ç§»è„šæœ¬ï¼ˆå‚è€ƒ [DATABASE_DESIGN.md](./DATABASE_DESIGN.md)ï¼‰
3. å¯ç”¨ Realtimeï¼ˆé»˜è®¤å·²å¯ç”¨ï¼‰
4. é…ç½® RLS ç­–ç•¥
5. è·å–é¡¹ç›® URL å’Œ anon key

### 2. ç¯å¢ƒå˜é‡

```env
# .env.local
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# JWT Secret (ç”¨äºè‡ªå®šä¹‰è®¤è¯)
JWT_SECRET=your_jwt_secret

# åº”ç”¨é…ç½®
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

### 3. Vercel éƒ¨ç½²

1. è¿æ¥ GitHub ä»“åº“
2. é…ç½®ç¯å¢ƒå˜é‡
3. éƒ¨ç½²

### 4. shadcn/ui å®‰è£…

```bash
# åˆå§‹åŒ– shadcn/ui
npx shadcn-ui@latest init

# æ·»åŠ éœ€è¦çš„ç»„ä»¶
npx shadcn-ui@latest add button
npx shadcn-ui@latest add card
npx shadcn-ui@latest add dialog
# ... å…¶ä»–ç»„ä»¶
```

---

## æ•°æ®å¯¼å…¥è®¡åˆ’

### 1. å•è¯æ•°æ®å¯¼å…¥

éœ€è¦å‡†å¤‡å„ä¸ªç­‰çº§çš„å•è¯æ•°æ®ï¼ˆCSV æˆ– JSON æ ¼å¼ï¼‰ï¼š

**CSV æ ¼å¼ç¤ºä¾‹:**
```csv
word,definition,pronunciation,rarity,wordbooks
hello,ä½ å¥½,hÉ™ËˆlÉ™ÊŠ,COMMON,PRIMARY;MIDDLE
world,ä¸–ç•Œ,wÉœËld,COMMON,PRIMARY;MIDDLE
...
```

**JSON æ ¼å¼ç¤ºä¾‹:**
```json
[
  {
    "word": "hello",
    "definition": "ä½ å¥½",
    "pronunciation": "hÉ™ËˆlÉ™ÊŠ",
    "rarity": "COMMON",
    "wordbookLevels": ["PRIMARY", "MIDDLE"]
  }
]
```

### 2. å¯¼å…¥è„šæœ¬

åˆ›å»º Node.js è„šæœ¬å¯¼å…¥æ•°æ®åˆ° Supabaseã€‚

---

## å¼€å‘ä¼˜å…ˆçº§

### Phase 1: æ ¸å¿ƒåŠŸèƒ½ï¼ˆMVPï¼‰
1. âœ… æ•°æ®åº“è¡¨ç»“æ„
2. âœ… ç”¨æˆ·æ³¨å†Œç™»å½•
3. â¬œ å•è¯ä¹¦å’Œå•è¯ç®¡ç†
4. â¬œ å¡åŒ…ç³»ç»Ÿ
5. â¬œ èŠå¤©å®¤åŸºç¡€åŠŸèƒ½

### Phase 2: å®Œå–„åŠŸèƒ½
1. ç®¡ç†å‘˜åå°
2. å•è¯æœç´¢å’Œç­›é€‰
3. ç”¨æˆ·èµ„æ–™ç¼–è¾‘
4. åœ¨çº¿çŠ¶æ€æ˜¾ç¤º

### Phase 3: ä¼˜åŒ–ä½“éªŒ
1. å¼€åŒ…åŠ¨ç”»
2. å“åº”å¼è®¾è®¡
3. æ€§èƒ½ä¼˜åŒ–
4. UI/UX ä¼˜åŒ–

---

## æ³¨æ„äº‹é¡¹

### 1. å®‰å…¨æ€§
- æ‰€æœ‰ç”¨æˆ·è¾“å…¥å¿…é¡»éªŒè¯
- å¯†ç å¿…é¡»åŠ å¯†å­˜å‚¨
- API å¿…é¡»è¿›è¡Œæƒé™æ£€æŸ¥
- é˜²æ­¢ SQL æ³¨å…¥ï¼ˆä½¿ç”¨ Supabase å‚æ•°åŒ–æŸ¥è¯¢ï¼‰

### 2. æ€§èƒ½ä¼˜åŒ–
- ä½¿ç”¨æ•°æ®åº“ç´¢å¼•
- æ¶ˆæ¯åˆ†é¡µåŠ è½½
- å›¾ç‰‡æ‡’åŠ è½½
- å®æ—¶è¿æ¥ç®¡ç†
- ä½¿ç”¨ Zustand çš„ persist ä¸­é—´ä»¶ç¼“å­˜çŠ¶æ€

### 3. ç”¨æˆ·ä½“éªŒ
- åŠ è½½çŠ¶æ€æç¤º
- é”™è¯¯æç¤ºå‹å¥½
- æ“ä½œåé¦ˆåŠæ—¶
- ç§»åŠ¨ç«¯é€‚é…ï¼ˆå“åº”å¼è®¾è®¡ï¼‰
- ä½¿ç”¨ Tailwind CSS å®ç°ä¸€è‡´çš„è§†è§‰é£æ ¼

### 4. æ•°æ®ä¸€è‡´æ€§
- ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡
- ä¹è§‚é”å¤„ç†å¹¶å‘
- å®æ—¶æ•°æ®åŒæ­¥

---

**æ–‡æ¡£ç‰ˆæœ¬**: 2.0  
**åˆ›å»ºæ—¥æœŸ**: 2026-01-12  
**æ›´æ–°æ—¥æœŸ**: 2026-01-12  

